@model app.Models.Tool

@{
    ViewData["Title"] = "Details";
}

<h2>Detaljer</h2>

<div id="app">
    <h4 style="display: inline-block;">@Model.Name</h4>
    <span v-bind:class="{ 'glyphicon-star': faviconhover, 'glyphicon-star-empty' : !faviconhover }"
        @@mouseover="faviconhover = true"
        @@mouseleave="faviconhover = false"
        class="glyphicon" style="font-size: 2em; vertical-align: text-bottom;"
        aria-hidden="true">
    </span>
    <hr />
    <span class="glyphicon glyphicon-wrench" style="font-size: 100px;" aria-hidden="true"></span>
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.Status)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Status)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Reports)
        </dt>
        @if (!Model.Reports.Any())
        {
            <dd></dd>
        }
        else
        {
           @foreach (var report in Model.Reports)
            {
                <dd>
                    - @report.Error
                    <a asp-controller="Reports" asp-action="Edit" asp-route-id="@report.Id">Edit</a> |
                    <a asp-controller="Reports" asp-action="Details" asp-route-id="@report.Id">Details</a> |
                    <a asp-controller="Reports" asp-action="Delete" asp-route-id="@report.Id">Delete</a> 
                </dd>
            }
        }
        <dt>
            @Html.DisplayNameFor(model => model.Alarms)
        </dt>
        @if (!Model.Alarms.Any())
        {
            <dd></dd>
        }
        else
        {
            @foreach (var alarm in Model.Alarms)
            {
                <dd>
                    - @alarm.Name: @alarm.Date
                    <a asp-controller="Alarms" asp-action="Edit" asp-route-id="@alarm.Id">Edit</a> |
                    <a asp-controller="Alarms" asp-action="Details" asp-route-id="@alarm.Id">Details</a> |
                    <a asp-controller="Alarms" asp-action="Delete" asp-route-id="@alarm.Id">Delete</a>
                </dd>
            }
        }
    </dl>
</div>

<div class="buttons">
    <a class="btn btn-primary">Reservér</a>
    <a href="/Reports/Create/@Model.Id" class="btn btn-warning">Rapporter feil</a>
    @if (User.IsInRole("Admin"))
    {
        <a href="/Alarms/Create/@Model.Id" class="btn btn-info">Registrer alarm</a>
    }
</div>

<br>
<a asp-action="Index">Tilbake til verktøyliste</a>

<style>
    .buttons .btn {
        margin-top: 5px;
    }
</style>

    

@section Scripts {
<script>
var app = new Vue({
    el: '#app',
    data: {
        faviconhover: false
    },
    created: function () {},
    methods: {

    }
})
</script>
}